import{r as o,j as e,R as v,Y as B,b as h}from"./app-DAEZisrD.js";import{B as L}from"./BreadCrumb-BejEMmky.js";import{L as M}from"./index-B72ceFEm.js";import{S as s}from"./sweetalert2.all-DjfAjup0.js";import{C as U}from"./Container-DTkvhr_k.js";import{R as k}from"./Row-DP2h-Y3A.js";import{C as F}from"./Col-B8aG_WSb.js";import{C as f}from"./Card-BqoKCbez.js";import{T as R}from"./Table-UH3F74uS.js";import{M as a}from"./Modal-B3Mr3uMa.js";import{F as i}from"./Form-CUYJsc4D.js";import{B as g}from"./Button-BSuMOxsW.js";import"./index-7MB6meGS.js";import"./logo-sm-DmJR8Lua.js";import"./logo-dark-Dh4DV6bR.js";import"./logo-light-l2wwNDet.js";import"./ReactToastify-Dfu59Ofk.js";import"./calender-yWVPQvD3.js";import"./ltc-BjMPbQSH.js";import"./dash-TnNMg90k.js";import"./img-1-Jhxup-Mz.js";import"./img-2-BKxLD3CN.js";import"./img-3-B4j7qXDU.js";import"./img-6-B4dmEj4y.js";import"./index-DKL1jx0G.js";import"./isObject-D7bzW4Uf.js";import"./avatar-2-B-1-S_lh.js";import"./avatar-3-CSm6kh8B.js";import"./avatar-5-D7m8bZ3v.js";import"./avatar-1-PHP4S1R6.js";import"./Dropdown-tOcdJjvK.js";import"./ThemeProvider-DpO2Fe9x.js";import"./querySelectorAll-Cwpyv69p.js";import"./listen-DOhMskc_.js";import"./SSRProvider-E5dZEr-W.js";import"./usePrevious-CP___m-f.js";import"./useForceUpdate-BGliwYZ3.js";import"./useEventCallback-Dcr8lMky.js";import"./useCallbackRef-B6c-Je3E.js";import"./mergeOptionsWithPopperConfig-Cih7uyRc.js";import"./useMounted-BJIR85-y.js";import"./useWindow-C_R7bMWe.js";import"./NavContext-DMVl8V9Z.js";import"./Button-a_Mq9XKy.js";import"./DataKey-DjdvojM5.js";import"./hook-BF0Uv_rT.js";import"./extends-CF3RwP-h.js";import"./useMergedRefs-DWL3_gRO.js";import"./Anchor-DRcRLFUD.js";import"./InputGroupContext-Dyo0o_3A.js";import"./NavbarContext-BLsiMOqp.js";import"./Collapse-D87sd4B3.js";import"./TransitionWrapper-C_dyntM9.js";import"./setPrototypeOf-DgZC2w_0.js";import"./CardHeaderContext-BqF8ZhAg.js";import"./divWithClassName-DBqZ_0ZL.js";import"./useWillUnmount-DpS6NFwO.js";import"./AbstractModalHeader-Cppe7zbO.js";import"./hasClass-ChvUM52G.js";import"./NoopTransition-BVps1reF.js";import"./CloseButton-CCRA29A_.js";import"./Fade-BnOsT5Gr.js";import"./ElementChildren-C5X_W_ol.js";const D=({users:n})=>{const[d,p]=o.useState(n||[]),[x,C]=o.useState(null),[T,m]=o.useState(!1),[E,b]=o.useState(null),[l,j]=o.useState({name:"",email:""});o.useEffect(()=>{n||fetch("/user_management/user").then(t=>{const r=t.headers.get("content-type");if(!r||!r.includes("application/json"))throw new TypeError("Expected JSON response but received HTML");return t.json()}).then(t=>{p(t)}).catch(t=>{C(t.message)})},[n]);const y=t=>{s.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, cancel!"}).then(r=>{r.isConfirmed&&fetch(`/user_management/user${t}`,{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}}).then(c=>{c.ok?(p(d.filter(S=>S.id!==t)),s.fire("Deleted!","The user has been deleted.","success")):s.fire("Error!","There was an error deleting the user.","error")}).catch(c=>{s.fire("Error!","There was an error deleting the user.","error")})})},N=t=>{b(t),j({name:t.name,email:t.email}),m(!0)},u=t=>{const{name:r,value:c}=t.target;j({...l,[r]:c})},w=()=>{fetch(`/user_management/user/${E.id}`,{method:"PUT",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify(l)}).then(t=>t.json()).then(t=>{p(d.map(r=>r.id===t.id?t:r)),m(!1),s.fire("Updated!","The user has been updated.","success")}).catch(t=>{s.fire("Error!","There was an error updating the user.","error")})};return e.jsxs(v.Fragment,{children:[e.jsx(B,{title:"User Management | Time To Pay"}),e.jsx("div",{className:"page-content",children:e.jsxs(U,{fluid:!0,children:[e.jsx(L,{title:"User Management",pageTitle:"Tables"}),e.jsx(k,{children:e.jsx(F,{xl:12,children:e.jsx(f,{children:e.jsx(f.Body,{children:e.jsxs("div",{className:"live-preview",children:[x&&e.jsxs("p",{className:"text-danger",children:["Error: ",x]}),e.jsx("div",{className:"table-responsive",children:e.jsxs(R,{className:"align-middle table-nowrap mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:"ID"}),e.jsx("th",{scope:"col",children:"Name"}),e.jsx("th",{scope:"col",children:"Email"}),e.jsx("th",{scope:"col",children:"Email Verfied"}),e.jsx("th",{scope:"col",children:"Action"})]})}),e.jsx("tbody",{children:d.map(t=>e.jsxs("tr",{children:[e.jsx("th",{scope:"row",children:e.jsx(h,{href:"#",className:"fw-medium",children:t.id})}),e.jsx("td",{children:t.name}),e.jsx("td",{children:t.email}),e.jsx("td",{children:t.email_verified_at}),e.jsxs("td",{children:[e.jsx(h,{href:"#",className:"me-2",onClick:()=>N(t),children:e.jsx("i",{className:"ri-pencil-line"})}),e.jsx(h,{href:"#",onClick:()=>y(t.id),children:e.jsx("i",{className:"ri-delete-bin-line"})})]})]},t.id))})]})})]})})})})})]})}),e.jsxs(a,{show:T,onHide:()=>m(!1),children:[e.jsx(a.Header,{closeButton:!0,children:e.jsx(a.Title,{children:"Edit User"})}),e.jsx(a.Body,{children:e.jsxs(i,{children:[e.jsxs(i.Group,{className:"mb-3",children:[e.jsx(i.Label,{children:"Name"}),e.jsx(i.Control,{type:"text",name:"name",value:l.name,onChange:u})]}),e.jsxs(i.Group,{className:"mb-3",children:[e.jsx(i.Label,{children:"Email"}),e.jsx(i.Control,{type:"email",name:"email",value:l.email,onChange:u})]})]})}),e.jsxs(a.Footer,{children:[e.jsx(g,{variant:"secondary",onClick:()=>m(!1),children:"Close"}),e.jsx(g,{variant:"primary",onClick:w,children:"Save Changes"})]})]})]})};D.layout=n=>e.jsx(M,{children:n});export{D as default};
