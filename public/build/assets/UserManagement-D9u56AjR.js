import{r as i,j as e,R as B,Y as L,a as x}from"./app-CcmPIReT.js";import{B as U}from"./BreadCrumb-CVy8OvG9.js";import{L as k}from"./index-DyNFT7ts.js";import{S as s}from"./sweetalert2.all-CVZi6o1K.js";import{C as D}from"./Container-CbzZz-pG.js";import{R as F}from"./Row-BpZuzSWn.js";import{C as R}from"./Col-BT99caCr.js";import{C as f}from"./Card-yrIYSTOn.js";import{T as A}from"./Table-C4aUjA5f.js";import{M as l}from"./Modal-DnQM4R4H.js";import{F as t}from"./Form-D5C7AGxv.js";import{B as C}from"./Button-CjmBuVFy.js";import"./index-E0pRXvh2.js";import"./logo-sm-DmJR8Lua.js";import"./logo-dark-Dh4DV6bR.js";import"./logo-light-l2wwNDet.js";import"./ReactToastify-hOsVGs7O.js";import"./calender-6pYCF-Qi.js";import"./ltc-BjMPbQSH.js";import"./dash-TnNMg90k.js";import"./img-1-Jhxup-Mz.js";import"./img-2-BKxLD3CN.js";import"./img-3-B4j7qXDU.js";import"./img-6-B4dmEj4y.js";import"./index-B9sCdwnn.js";import"./isObject-U9U2HXiq.js";import"./avatar-2-B-1-S_lh.js";import"./avatar-3-CSm6kh8B.js";import"./avatar-5-D7m8bZ3v.js";import"./avatar-1-PHP4S1R6.js";import"./Dropdown-CZ6gxq-L.js";import"./ThemeProvider-CSTTv7nq.js";import"./querySelectorAll-Cwpyv69p.js";import"./listen-DOhMskc_.js";import"./SSRProvider-DsKskV_g.js";import"./usePrevious-DNpMYT0V.js";import"./useForceUpdate-szFTueT1.js";import"./useEventCallback-BJse7mIf.js";import"./useCallbackRef-DOaTl7z1.js";import"./mergeOptionsWithPopperConfig-CF0vfbBt.js";import"./useMounted-Bja3_6ae.js";import"./useWindow-CvUQe0g5.js";import"./NavContext-DwPeOdq-.js";import"./Button-CAE2U-yP.js";import"./DataKey-DjdvojM5.js";import"./hook-D61oMDbP.js";import"./extends-BFqQA52f.js";import"./useMergedRefs-C3j-VvFq.js";import"./Anchor-x2SFhHNR.js";import"./InputGroupContext-BY31koS2.js";import"./NavbarContext-CDqv-Zet.js";import"./Collapse-BnX8fGdo.js";import"./TransitionWrapper-RT2fFqbB.js";import"./setPrototypeOf-DgZC2w_0.js";import"./CardHeaderContext-C52wv7vf.js";import"./divWithClassName-CM1F4fkU.js";import"./useWillUnmount-K4WbxWkU.js";import"./AbstractModalHeader-CyAL14sU.js";import"./hasClass-B_-N1DDL.js";import"./NoopTransition-NIwa5DHe.js";import"./CloseButton-Bq4WJIiA.js";import"./Fade-BDvw6Q76.js";import"./ElementChildren-BwLiqz1a.js";const Y=({users:n})=>{const[p,h]=i.useState(n||[]),[j,g]=i.useState(null),[b,m]=i.useState(!1),[T,y]=i.useState(null),[o,u]=i.useState({id:"",name:"",email:"",pancard:"",aadhaar:""});i.useEffect(()=>{n||E()},[n]);const E=()=>{fetch("/user_management/user").then(r=>{const a=r.headers.get("content-type");if(!a||!a.includes("application/json"))throw new TypeError("Expected JSON response but received HTML");return r.json()}).then(r=>{h(r)}).catch(r=>{g(r.message)})},N=r=>{s.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, cancel"}).then(a=>{a.isConfirmed&&fetch(`/user_management/user/${r}`,{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}}).then(d=>{d.ok?(h(p.filter(S=>S.id!==r)),s.fire("Deleted!","The user has been deleted.","success")):s.fire("Error!","There was an error deleting the user.","error")}).catch(d=>{s.fire("Error!","There was an error deleting the user.","error")})})},v=r=>{y(r),u({id:r.id,name:r.name,email:r.email,pancard:r.pancard||"",aadhaar:r.aadhaar||""}),m(!0)},c=r=>{const{name:a,value:d}=r.target;u({...o,[a]:d})},w=()=>{fetch(`/user_management/user/${T.id}`,{method:"PUT",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify(o)}).then(r=>r.json()).then(r=>{h(p.map(a=>a.id===r.id?r:a)),m(!1),s.fire("Updated!","The user has been updated.","success")}).catch(r=>{s.fire("Error!","There was an error updating the user.","error")})};return e.jsxs(B.Fragment,{children:[e.jsx(L,{title:"User KYC | Time To Pay"}),e.jsx("div",{className:"page-content",children:e.jsxs(D,{fluid:!0,children:[e.jsx(U,{title:"User KYC",pageTitle:"Tables"}),e.jsx(F,{children:e.jsx(R,{xl:12,children:e.jsx(f,{children:e.jsx(f.Body,{children:e.jsxs("div",{className:"live-preview",children:[j&&e.jsxs("p",{className:"text-danger",children:["Error: ",j]}),e.jsx("div",{className:"table-responsive",children:e.jsxs(A,{className:"align-middle table-nowrap mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:"ID"}),e.jsx("th",{scope:"col",children:"Name"}),e.jsx("th",{scope:"col",children:"Email"}),e.jsx("th",{scope:"col",children:"Pancard"}),e.jsx("th",{scope:"col",children:"Aadhaar"}),e.jsx("th",{scope:"col",children:"Action"})]})}),e.jsx("tbody",{children:p.map(r=>e.jsxs("tr",{children:[e.jsx("th",{scope:"row",children:e.jsx(x,{href:"#",className:"fw-medium",children:r.id})}),e.jsx("td",{children:r.name}),e.jsx("td",{children:r.email}),e.jsx("td",{children:r.pancard}),e.jsx("td",{children:r.aadhaar}),e.jsxs("td",{children:[e.jsx(x,{href:"#",className:"me-2",onClick:()=>v(r),children:"Edit"}),e.jsx(x,{href:"#",onClick:()=>N(r.id),children:"Delete"})]})]},r.id))})]})})]})})})})})]})}),e.jsxs(l,{show:b,onHide:()=>m(!1),children:[e.jsx(l.Header,{closeButton:!0,children:e.jsx(l.Title,{children:"Edit User"})}),e.jsx(l.Body,{children:e.jsxs(t,{children:[e.jsxs(t.Group,{className:"mb-3",children:[e.jsx(t.Label,{children:"Name"}),e.jsx(t.Control,{type:"text",name:"name",value:o.name,onChange:c})]}),e.jsxs(t.Group,{className:"mb-3",children:[e.jsx(t.Label,{children:"Email"}),e.jsx(t.Control,{type:"email",name:"email",value:o.email,onChange:c})]}),e.jsxs(t.Group,{className:"mb-3",children:[e.jsx(t.Label,{children:"Pancard"}),e.jsx(t.Control,{type:"text",name:"pancard",value:o.pancard,onChange:c})]}),e.jsxs(t.Group,{className:"mb-3",children:[e.jsx(t.Label,{children:"Aadhaar"}),e.jsx(t.Control,{type:"text",name:"aadhaar",value:o.aadhaar,onChange:c})]})]})}),e.jsxs(l.Footer,{children:[e.jsx(C,{variant:"secondary",onClick:()=>m(!1),children:"Close"}),e.jsx(C,{variant:"primary",onClick:w,children:"Save Changes"})]})]})]})};Y.layout=n=>e.jsx(k,{children:n});export{Y as default};
