import{u as ae,r as u,c as ne,a as le,j as e,R as G,Y as re,b as ie}from"./app-DAA4umSp.js";import{P as h}from"./index-B8itEOvo.js";import{F as oe}from"./index-B_uVt7X9.js";import{u as de,c as ce,a as D,d as L,e as me}from"./index.esm-osZF-PkQ.js";import{o as pe,a as ue,b as xe,E as he,c as ve,d as $,F as ge,i as je,e as be,f as fe,g as Ne,h as ye}from"./index-BerEBTEb.js";import{F as I}from"./index-cjBIODw-.js";import{B as Ee}from"./BreadCrumb-Bbps-xeQ.js";import{D as De}from"./DeleteModal-DZDXnSgm.js";import{S as ke}from"./index-XSywm6kh.js";import Ce from"./UpcommingEvents-DTNPMRe2.js";import"./ReactToastify-jGGXfTHy.js";import"./calender-yWVPQvD3.js";import{L as Se}from"./index-ChknMJM7.js";import{C as we}from"./Container-Cje7132t.js";import{R as M}from"./Row-C8gNVKjv.js";import{C as x}from"./Col-Dd-7fFYa.js";import{C as j}from"./Card-DPRNNE61.js";import{M as T}from"./Modal-D-7Nseb4.js";import{F as l}from"./Form-DxpFrAJe.js";import"./_baseClone-1g4bW0SP.js";import"./isObject-D7bzW4Uf.js";import"./hoist-non-react-statics.cjs-Bvzhpf--.js";import"./ThemeProvider-Cohb_4IJ.js";import"./CardHeaderContext-DP7KM0Ib.js";import"./divWithClassName-C3FyiOjc.js";import"./ltc-BjMPbQSH.js";import"./dash-TnNMg90k.js";import"./img-1-Jhxup-Mz.js";import"./img-2-BKxLD3CN.js";import"./img-3-B4j7qXDU.js";import"./img-6-B4dmEj4y.js";import"./logo-sm-DmJR8Lua.js";import"./logo-dark-Dh4DV6bR.js";import"./logo-light-l2wwNDet.js";import"./avatar-2-B-1-S_lh.js";import"./avatar-3-CSm6kh8B.js";import"./avatar-5-D7m8bZ3v.js";import"./avatar-1-PHP4S1R6.js";import"./Dropdown-BMeNbemE.js";import"./querySelectorAll-Cwpyv69p.js";import"./listen-DOhMskc_.js";import"./SSRProvider-D5jaPZlz.js";import"./usePrevious-U83WOE4G.js";import"./useForceUpdate-CMi1GG9F.js";import"./useEventCallback-DazKxGTp.js";import"./useCallbackRef-BHXXgk_h.js";import"./mergeOptionsWithPopperConfig-BfRC57Rj.js";import"./useMounted-CtcQznzv.js";import"./useWindow-C1j0nj5K.js";import"./NavContext-BMmZtpsL.js";import"./Button-Cm1f8AqA.js";import"./DataKey-DjdvojM5.js";import"./hook-CZF_VRVT.js";import"./extends-CF3RwP-h.js";import"./useMergedRefs-CgdBK-bJ.js";import"./Anchor-DRo_1xWF.js";import"./InputGroupContext-CZ5D-Tve.js";import"./NavbarContext-CNhhZldJ.js";import"./Button-0uHp86Qk.js";import"./Collapse-CLExACe_.js";import"./TransitionWrapper-Z6ZdfMDi.js";import"./setPrototypeOf-DgZC2w_0.js";import"./useWillUnmount-B9ugUPSu.js";import"./AbstractModalHeader-C0Fh221I.js";import"./hasClass-DKP8tRzf.js";import"./NoopTransition-C2sbNLoM.js";import"./CloseButton-N93lUkEw.js";import"./Fade-D4CW-71Y.js";import"./ElementChildren-CSrO72FP.js";const R=()=>{const d=ae(),[n,k]=u.useState({}),[O,P]=u.useState(!1),[p,b]=u.useState(),[c,C]=u.useState(!1),[U,S]=u.useState(!0),[Y,w]=u.useState(!1),[_,H]=u.useState(""),[V,W]=u.useState(""),z=ne(t=>t.Calendar,t=>({events:t.events,categories:t.categories,isEventUpdated:t.isEventUpdated})),{events:F,categories:q,isEventUpdated:A}=le(z);u.useEffect(()=>{d(pe()),d(ue()),d(xe()),new he(document.getElementById("external-events"),{itemSelector:".external-event"})},[d]),u.useEffect(()=>{A&&(C(!1),k({}))},[d,A]);const v=()=>{O?(P(!1),k(null),C(!1),S(!0)):P(!0)},J=t=>{const a=t.date;b(a),v()},B=function(a){var r=["January","February","March","April","May","June","July","August","September","October","November","December"],o=new Date(a),m=""+r[o.getMonth()],i=""+o.getDate(),g=o.getFullYear();return m.length<2&&(m="0"+m),i.length<2&&(i="0"+i),[i+" "+m,g].join(",")},K=t=>{const a=t.event,r=a.start,o=a.end,m=o==null?B(r):B(r)+" to "+B(o),i=o===null?[r]:[r,o];k({id:a.id,title:a.title,start:a.start,end:a.end,className:a.classNames,category:a.classNames[0],location:a._def.extendedProps.location?a._def.extendedProps.location:"No Loaction",description:a._def.extendedProps.description,defaultDate:i,datetag:m}),b(i),W(a.title),H(a.id),C(!0),S(!1),v()},Q=()=>{d(ye(_)),w(!1)},s=de({enableReinitialize:!0,initialValues:{id:n&&n.id||"",title:n&&n.title||"",category:n&&n.category||"",location:n&&n.location||"",description:n&&n.description||"",defaultDate:n&&n.defaultDate||[],datetag:n&&n.datetag||"",start:n&&n.start||"",end:n&&n.end||""},validationSchema:ce({title:D().required("Please Enter Your Event Name"),category:D().required("Please Select Your Category"),location:D().required("Please Enter Your Location"),description:D().required("Please Enter Your Description"),start:L().required("Start Time is required"),end:L().required("End Time is required"),defaultDate:me().of(L()).required("Date range is required").min(2,"Select at least two dates")}),onSubmit:t=>{var a="";if(p&&(a=new Date(p[1]),a.setDate(a.getDate())),c){const r={id:n.id,title:t.title,className:t.category,start:p?p[0].toISOString():n.start,end:p?a.toISOString():n.end,location:t.location,description:t.description,defaultDate:[p[0].toISOString(),p[1].toISOString()]};d(ve(r)),s.resetForm()}else{const r={id:Math.floor(Math.random()*100),title:t.title,start:p[0].toISOString(),end:a.toISOString(),className:t.category,location:t.location,description:t.description,defaultDate:[p[0].toISOString(),p[1].toISOString()]};d($(r)),s.resetForm()}b(null),v()}}),X=()=>{var t,a,r,o,m,i,g,f,N,y;(t=document.getElementById("form-event"))==null||t.classList.remove("view-event"),(a=document.getElementById("event-title"))==null||a.classList.replace("d-none","d-block"),(r=document.getElementById("event-category"))==null||r.classList.replace("d-none","d-block"),((o=document.getElementById("event-start-date"))==null?void 0:o.parentNode).classList.remove("d-none"),(m=document.getElementById("event-start-date"))==null||m.classList.replace("d-none","d-block"),(i=document.getElementById("event-location"))==null||i.classList.replace("d-none","d-block"),(g=document.getElementById("event-description"))==null||g.classList.replace("d-none","d-block"),(f=document.getElementById("event-start-date-tag"))==null||f.classList.replace("d-block","d-none"),(N=document.getElementById("event-location-tag"))==null||N.classList.replace("d-block","d-none"),(y=document.getElementById("event-description-tag"))==null||y.classList.replace("d-block","d-none"),S(!0)},Z=t=>{t.preventDefault()},ee=t=>{const a=t.date,r=a.getDate(),o=a.getMonth(),m=a.getFullYear(),i=new Date,g=i.getHours(),f=i.getMinutes(),N=i.getSeconds(),y=new Date(m,o,r,g,f,N),E=t.draggedEl,te=E.className;if(E.classList.contains("external-event")&&te.indexOf("fc-event-draggable")===-1){const se={id:Math.floor(Math.random()*1e3),title:E.innerText,start:y,className:E.className};d($(se))}};return e.jsxs(G.Fragment,{children:[e.jsx(re,{title:"Calendar | Velzon - React Admin & Dashboard Template"}),e.jsx(De,{show:Y,onDeleteClick:Q,onCloseClick:()=>{w(!1)}}),e.jsx("div",{className:"page-content",children:e.jsxs(we,{fluid:!0,children:[e.jsx(Ee,{title:"Calendar",pageTitle:"Apps"}),e.jsx(M,{children:e.jsxs(x,{xs:12,children:[e.jsxs(M,{children:[e.jsxs(x,{xl:3,children:[e.jsx(j,{className:"card-h-100",children:e.jsxs(j.Body,{children:[e.jsxs("button",{className:"btn btn-primary w-100",id:"btn-new-event",onClick:v,children:[e.jsx("i",{className:"mdi mdi-plus"})," Create New Event"]}),e.jsxs("div",{id:"external-events",children:[e.jsx("br",{}),e.jsx("p",{className:"text-muted",children:"Drag and drop your event or click in the calendar"}),q&&q.map(t=>e.jsxs("div",{className:`bg-${t.type}-subtle external-event fc-event text-${t.type}`,draggable:!0,onDrag:a=>{Z(a)},children:[e.jsx("i",{className:"mdi mdi-checkbox-blank-circle font-size-11 me-2"}),t.title]},"cat-"+t.id))]})]})}),e.jsxs("div",{children:[e.jsx("h5",{className:"mb-1",children:"Upcoming Events"}),e.jsx("p",{className:"text-muted",children:"Don't miss scheduled events"}),e.jsx(ke,{className:"pe-2 me-n1 mb-3",style:{height:"400px"},children:e.jsx("div",{id:"upcoming-event-list",children:F&&(F||[]).map((t,a)=>e.jsx(G.Fragment,{children:e.jsx(Ce,{event:t})},a))})})]}),e.jsx(j,{children:e.jsx(j.Body,{className:"bg-info-subtle",children:e.jsxs("div",{className:"d-flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(oe,{icon:"calendar",className:"text-info icon-dual-info"})}),e.jsxs("div",{className:"flex-grow-1 ms-3",children:[e.jsx("h6",{className:"fs-15",children:"Welcome to your Calendar!"}),e.jsx("p",{className:"text-muted mb-0",children:"Event that applications book will appear here. Click on an event to see the details and manage applicants event."})]})]})})})]}),e.jsx(x,{xl:9,children:e.jsx(j,{className:"card-h-100",children:e.jsx(j.Body,{children:e.jsx(ge,{plugins:[je,be,fe,Ne],initialView:"dayGridMonth",slotDuration:"00:15:00",handleWindowResize:!0,themeSystem:"bootstrap",headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,dayGridWeek,dayGridDay,listWeek"},events:F,editable:!0,droppable:!0,selectable:!0,dateClick:J,eventClick:K,drop:ee})})})})]}),e.jsx("div",{style:{clear:"both"}}),e.jsxs(T,{show:O,onHide:v,id:"event-modal",centered:!0,children:[e.jsx(T.Header,{className:"p-3 bg-info-subtle",closeButton:!0,children:e.jsx("h5",{className:"modal-title",children:c?V:"Add Event"})}),e.jsx(T.Body,{children:e.jsxs(l,{className:c?"needs-validation view-event":"needs-validation",name:"event-form",id:"form-event",onSubmit:t=>(t.preventDefault(),s.handleSubmit(),!1),children:[c?e.jsx("div",{className:"text-end",children:e.jsx(ie,{href:"#",className:"btn btn-sm btn-soft-primary",id:"edit-event-btn",onClick:t=>(t.preventDefault(),X(),!1),children:"Edit"})}):null,e.jsxs("div",{className:"event-details",children:[e.jsx("div",{className:"d-flex mb-2",children:e.jsxs("div",{className:"flex-grow-1 d-flex align-items-center",children:[e.jsx("div",{className:"flex-shrink-0 me-3",children:e.jsx("i",{className:"ri-calendar-event-line text-muted fs-16"})}),e.jsx("div",{className:"flex-grow-1",children:e.jsx("h6",{className:"d-block fw-semibold mb-0",id:"event-start-date-tag",children:n?n.datetag:""})})]})}),e.jsxs("div",{className:"d-flex align-items-center mb-2",children:[e.jsx("div",{className:"flex-shrink-0 me-3",children:e.jsx("i",{className:"ri-time-line text-muted fs-16"})}),e.jsx("div",{className:"flex-grow-1",children:e.jsxs("h6",{className:"d-block fw-semibold mb-0",children:[e.jsx("span",{id:"event-timepicker1-tag",children:"12:00 AM"})," - ",e.jsx("span",{id:"event-timepicker2-tag",children:"5:30 AM"})]})})]}),e.jsxs("div",{className:"d-flex align-items-center mb-2",children:[e.jsx("div",{className:"flex-shrink-0 me-3",children:e.jsx("i",{className:"ri-map-pin-line text-muted fs-16"})}),e.jsx("div",{className:"flex-grow-1",children:e.jsx("h6",{className:"d-block fw-semibold mb-0",children:e.jsx("span",{id:"event-location-tag",children:n&&n.location!==void 0?n.location:"No Location"})})})]}),e.jsxs("div",{className:"d-flex mb-3",children:[e.jsx("div",{className:"flex-shrink-0 me-3",children:e.jsx("i",{className:"ri-discuss-line text-muted fs-16"})}),e.jsx("div",{className:"flex-grow-1",children:e.jsx("p",{className:"d-block text-muted mb-0",id:"event-description-tag",children:n&&n.description!==void 0?n.description:"No Description"})})]})]}),e.jsxs(M,{className:"event-form",children:[e.jsx(x,{xs:12,children:e.jsxs("div",{className:"mb-3",children:[e.jsx(l.Label,{className:"form-label",children:"Type"}),e.jsxs("select",{className:c?"form-select d-none":"form-select d-block",name:"category",id:"event-category",onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.category||"",children:[e.jsx("option",{value:"bg-danger-subtle",children:"Danger"}),e.jsx("option",{value:"bg-success-subtle",children:"Success"}),e.jsx("option",{value:"bg-primary-subtle",children:"Primary"}),e.jsx("option",{value:"bg-info-subtle",children:"Info"}),e.jsx("option",{value:"bg-dark-subtle",children:"Dark"}),e.jsx("option",{value:"bg-warning-subtle",children:"Warning"})]}),s.touched.category&&s.errors.category?e.jsx(l.Control.Feedback,{type:"invalid",className:"d-block",children:s.errors.category}):null]})}),e.jsx(x,{xs:12,children:e.jsxs("div",{className:"mb-3",children:[e.jsx(l.Label,{className:"form-label",children:"Event Name"}),e.jsx(l.Control,{className:c?"d-none":"d-block",placeholder:"Enter event name",type:"text",name:"title",id:"event-title",onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.title||""}),s.touched.title&&s.errors.title?e.jsx(l.Control.Feedback,{type:"invalid",className:"d-block",children:s.errors.title}):null]})}),e.jsx(x,{xs:12,children:e.jsxs("div",{className:"mb-3",children:[e.jsx(l.Label,{children:"Event Date"}),e.jsxs("div",{className:c?"input-group d-none":"input-group",children:[e.jsx(I,{"data-enable-time":!0,className:"form-control",id:"event-start-date",name:"defaultDate",placeholder:"Select Date",value:s.values.defaultDate||"",options:{mode:"range",dateFormat:"Y-m-d"},onChange:t=>{b(t),s.setFieldValue("defaultDate",t)}}),e.jsx("span",{className:"input-group-text",children:e.jsx("i",{className:"ri-calendar-event-line"})})]}),s.touched.defaultDate&&s.errors.defaultDate?e.jsxs(l.Control.Feedback,{type:"invalid",className:"d-block",children:[s.errors.defaultDate," "]}):null]})}),e.jsx(x,{xs:6,children:e.jsxs("div",{className:"mb-3",children:[e.jsx(l.Label,{children:"Start Time"}),e.jsxs("div",{className:"input-group",children:[e.jsx(I,{className:"form-control",name:"start",value:s.values.start||"",onChange:t=>s.setFieldValue("start",t[0]),options:{enableTime:!0,noCalendar:!0,dateFormat:"H:i"}}),e.jsxs("span",{className:"input-group-text",children:[" ",e.jsx("i",{className:"ri-calendar-event-line"})," "]})]}),s.touched.start&&s.errors.start?e.jsxs(l.Control.Feedback,{type:"invalid",className:"d-block",children:[s.errors.start," "]}):null]})}),e.jsx(x,{xs:6,children:e.jsxs("div",{className:"mb-3",children:[e.jsx(l.Label,{children:"End Time"}),e.jsxs("div",{className:"input-group",children:[e.jsx(I,{className:"form-control input-group",name:"end",value:s.values.end||"",onChange:t=>s.setFieldValue("end",t[0]),options:{enableTime:!0,noCalendar:!0,dateFormat:"H:i"}}),e.jsxs("span",{className:"input-group-text",children:[" ",e.jsx("i",{className:"ri-calendar-event-line"})," "]})]}),s.touched.end&&s.errors.end?e.jsxs(l.Control.Feedback,{type:"invalid",className:"d-block",children:[s.errors.end," "]}):null]})}),e.jsx(x,{xs:12,children:e.jsxs("div",{className:"mb-3",children:[e.jsx(l.Label,{htmlFor:"event-location",children:"Location"}),e.jsxs("div",{children:[e.jsx(l.Control,{type:"text",className:c?"d-none":"d-block",name:"location",id:"event-location",placeholder:"Event location",onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.location}),s.touched.location&&s.errors.location?e.jsx(l.Control.Feedback,{type:"invalid",className:"d-block",children:s.errors.location}):null]})]})}),e.jsx(x,{xs:12,children:e.jsxs("div",{className:"mb-3",children:[e.jsx(l.Label,{className:"form-label",children:"Description"}),e.jsx("textarea",{className:c?"form-control d-none":"form-control d-block",id:"event-description",name:"description",placeholder:"Enter a description",rows:3,onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.description}),s.touched.description&&s.errors.description?e.jsx(l.Control.Feedback,{type:"invalid",className:"d-block",children:s.errors.description}):null]})})]}),e.jsxs("div",{className:"hstack gap-2 justify-content-end",children:[!!c&&e.jsxs("button",{type:"button",className:"btn btn-soft-danger",id:"btn-delete-event",onClick:()=>{v(),w(!0)},children:[e.jsx("i",{className:"ri-close-line align-bottom"})," Delete"]}),U&&e.jsx("button",{type:"submit",className:"btn btn-success",id:"btn-save-event",children:c?"Edit Event":"Add Event"})]})]})})]})]})})]})})]})};R.propTypes={events:h.any,categories:h.array,className:h.string,onGetEvents:h.func,onAddNewEvent:h.func,onUpdateEvent:h.func,onDeleteEvent:h.func,onGetCategories:h.func};R.layout=d=>e.jsx(Se,{children:d});export{R as default};
